---
title: "R markdown"
output: html_document
---
<style>
.basic_md {
border-style: solid;
border-width: 1px;
border-color: #e6e6e6;
border-radius: 3px;
background: #fff2e6;
padding: 10px;
width: 89%;
margin: auto
}

.code-exmpl {
border-style: solid;
border-width: 1px;
border-color: #e6e6e6;
border-radius: 3px;
background: #f2f2f2;
padding: 10px;
width: 89%;
margin: auto
}
</style>
>  Aims:
>
> - To learn to write R markdown documents and compile into differnet documents types
>
> - To learn how to embed R code into markdown documents

# Introduction to markdown

Markdown is a powerful "language" for writing different kinds of documents, such as **PDF** or **HTML** in an efficient way, but markdown documents can also be published as is. The underlying idea for markdown is that it is easy-to-write and easy-to-read.

You can use any [text editor](https://en.wikipedia.org/wiki/Text_editor) to write markdown. RStudio already comes with a text editor and because it also has a few additional things that make markdown writing much easier we are going to use its text editor.

# R markdown

We are going to learn an R flavour of markdown - [R markdown](http://rmarkdown.rstudio.com/), which builds on top of standard markdown, which is a slightly augmented version of markdown. The big advantage of [R markdown](http://rmarkdown.rstudio.com/) is its ability to embed and execute code in a markdown document. [R markdown](http://rmarkdown.rstudio.com/) is a great way to document your analysis and share it with others.

Let's get right into it. Open **R Markdown file** using these drop down menu steps: **File** -> **New File** -> **R Markdown**. You can put any `title` and any `author` name. For now select **Document** and Document type **HTML**. Once you have opened your `.Rmd` file, click on the `Knit HTML` button at the top of your pane. 

`Knitr` is an R package that does all the magic of converting and running your R markdown and R code respectively. 

These are three main parts to any R markdown document

#### [YAML header secession. I will talk about it at the very end](#yaml-header)

<div class="basic_md">
 &#175;&#175;&#175; <br>
 title: "Hello world" <br>
 author: "Kirill" <br>
 date: "13 July 2016" <br>
 output: html_document <br>
 &#175;&#175;&#175; 
</div>

#### [The R code blocks. Most interesting to us and we will talk about it shortly](#r-code-in-r-markdown)

<div class="basic_md">
&#96;&#96;&#96;{r pressure, echo=FALSE}<br>
 plot(pressure) <br>
&#96;&#96;&#96;
</div> 
<br>

#### [Everything else is plain old markdown](#markdown-basics)

<div class="basic_md">
&#35; Have I been Marked Down ?
</div>

# Markdown basics

Now it's just a matter of learning some of the markdown syntax. Let's delete all current text from the opened document except the YAML header and type this new text in `Hello world, I'm learning R markdown !` and pressing the `Knit HTML` button.

```
Hello world, I'm learning R markdown !
```
<div class="code-exmpl">
Hello world, I'm learning R markdown !
</div>

Not much happened. This is because we didn't mark our text in any way. You can put as much text as you want and it will appear as is, unless "specially" marked to look differentlly.

Now add the `#` symbol at the start of the line and press the `Knit HTML` button again. We'll be pressing this button a lot! For those who like keyboard short cuts use `ctrl+shift+k` instead.

```
# Hello world, I'm learning R markdown !
```
<div class="code-exmpl">
# Hello world, I'm learning R markdown !
</div>

How about now? A single hash symbol made it whole lot bigger didn't it? We've marked this whole line to be the header line.

Now make three new lines with the same text, but different nubmers of `#` symbols, one, two and three respectively and keep pressing the `Knit HTML` button

```
# Hello world, I'm learning R markdown !
## Hello world, I'm learning R markdown !
### Hello world, I'm learning R markdown !
```
<div class="code-exmpl">
# Hello world, I'm learning R markdown !
## Hello world, I'm learning R markdown !
### Hello world, I'm learning R markdown !
</div>

This is how you can specify different headers type using markdown. 

**Remember** that [basic markdown](https://daringfireball.net/projects/markdown/syntax) is comprised entirely of punctuation characters. 

Here is a couple more examples of markdown syntax. To make an emphasis e.g italics, you mark your word(s) with asterisks or underscores.

```
Hello world, I'm *learning* R markdown !
Hello world, I'm _learning_ R markdown !
```
<div class="code-exmpl">
Hello world, I'm *learning* R markdown !
 <br>
Hello world, I'm _learning_ R markdown !
</div>

To make strong emphasis e.g bold, you mark your word(s) with double asterisks or underscores.

```
Hello world, I'm **learning** R markdown !
Hello world, __I'm learning__ R markdown !
```
<div class="code-exmpl">
Hello world, I'm **learning** R markdown !
 <br>
Hello world, __I'm learning__ R markdown !
</div>

And you can combine both if you like

```
Hello world, **I'm _learning_** markdown !
```
<div class="code-exmpl">
Hello world, **I'm _learning_** R markdown !
</div>

Wouldn't you agree that this is much faster then pressing the bold **B** button every time you need an emphasis?

Let me show you how you can make different types of lists and then we move on to additional R markdown bits.

To make an unordered list you can use either `*`, `-` or `+` symbols to mark your bullet points or simply use a number with a dot e.g `1.` to make an ordered list.

```
- a bullet point
* also a bullet point
+ bullet point too

1. First item on the list
2. Second item on the list
```

<div class="code-exmpl">
- a bullet point
* also a bullet point
+ bullet point too

1. First item on the list
2. Second item on the list
</div>

And if you like to make sub-lists simply indent those in, by two or four spaces

```
1. First item on the list

    - a
    - b
    - c
  
2. Second item on the list

    1. A
    2. B
    3. C
```

<div class="code-exmpl">

1. First item on the list

    - a
    - b
    - c
  
2. Second item on the list

    1. A
    2. B
    3. C
    
</div>

# R code in R markdown

From now onwards we are going to focus on R specific markdown. The most powerful part is the ability to embed R code in markdown. In order to do that we need to use the ` ```{r } ..``` ` syntax.

Let's start with a simple `print()` statement and print `Hello world, I'm learning R markdown !`

This is what you need to type in your text editor

<div class="basic_md">
&#96;&#96;&#96;{r}<br>
 print("Hello world, I'm learning R markdown !")<br>
&#96;&#96;&#96;
</div> 
<br>

And this is how the output is going to look.

```{r}
print("Hello world, I'm learning R markdown !")
```

This is how embeded code works in the document. One box shows what you've typed in a.k.a your code and the box below it shows your output just like you'd exepct it in the _console_.

We can tweak many things about your output using different options that we can include inside curly brackets e.g ```{r options} ..```. 

The two most common options are `echo=TRUE` and `eval=TRUE` both by default are set to true and this is why I didn't have to pass them in. 

  - `echo` means show what has been typed in i.e show the code
  - `eval` means evaluate or execute that code
    
Sometimes we might want to show the code, but not execute it and other times we might just want to execute it and get the results without actually bore audience with the code. 

let's try both of these options one at a time. We start with passing `echo=FALSE` options first

<div class="basic_md">
&#96;&#96;&#96;{r echo=FALSE}<br>
 print("Hello world, I'm learning R markdown !")<br>
&#96;&#96;&#96;
</div> 
<br>

```{r echo=F}
print("Hello world, I'm learning R markdown !")
```

Okay, we don't see our original `print()` statement. And now let's pass `eval=FALSE` options instead

<div class="basic_md">
&#96;&#96;&#96;{r eval=FALSE}<br>
 print("Hello world, I'm learning R markdown !")<br>
&#96;&#96;&#96;
</div> 
<br>

```{r eval=F}
print("Hello world, I'm learning R markdown !")
```

And now we only see `print()` statement and no output.

[Here is nice cheatsheet](http://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf) that has comprehensive cover of all the options you can pass in.

Let's now try a different example and use the `cars` inbuilt dataset for this next example. Just as we are able to access that variable - `cars` in the _console_ we can do the same here.

<div class="basic_md">
&#96;&#96;&#96;{r}<br>
 summary(cars)<br>
&#96;&#96;&#96;
</div> 
<br>

```{r}
summary(cars)
```

**Remembber** You can go between R markdown and _concole_, to check your code, at any time. You should see your code block is highlighted differently and you should see a green arrow at the right hand site of that block. Press the green arrow to get an output in the _console_. You can also use `ctrl+enter` to do the same with the keyboard short cut.

How about little data exploration? We are going to start working in the _console_ and then copy interesting bits into R document. In the _console_ check a data type using `class()` function, then get first few rows of the table with `head()`. It looks like a `data.frame` with two columns. Now let's plot our finding so we can share it with others.

<div class="basic_md">
&#96;&#96;&#96;{r}<br>
 plot(cars&#36;speed, cars&#36;dist)<br>
&#96;&#96;&#96;
</div> 
<br>
```{r}
plot(cars$speed, cars$dist)
```

Here is a perfect example where we can hide our code from the viewer, since it isn't most interesting bit about this data. Let's turn `echo=FALSE` options for all our plots below.

Properly labelled plots are very informative, let's do that as well, starting with a title `main="Travelling speed vs Breaking distance"` and then labelling axis, x `xlab="Travelling speed (mhp)"` and y `ylab="Stopping distance (ft)"`

<div class="basic_md">
&#96;&#96;&#96;{r echo=FALSE}<br>
 plot(cars&#36;speed, cars&#36;dist, main="Travelling speed vs Breaking distance", xlab = "Travelling speed (mhp)", ylab="Stopping distance (ft)") <br>
&#96;&#96;&#96;
</div> 
<br>
```{r echo=FALSE}
plot(cars$speed, cars$dist, main="Travelling speed vs Breaking distance", xlab = "Travelling speed (mhp)", ylab="Stopping distance (ft)")
```

Okay, this looks much nicer. Let me show you some other useful options that can manipulate figures. 

Figure alignment can be done with `fig.align` options e.g ```{r fig.align=default} ..``` default means what ever your style sheet has. The other options are, "left", "center" and "right". let's try one out.

<div class="basic_md">
&#96;&#96;&#96;{r echo=FALSE, fig.align='right'}<br>
 plot(cars&#36;speed, cars&#36;dist, main="Travelling speed vs Breaking distance", xlab = "Travelling speed (mhp)", ylab="Stopping distance (ft)") <br>
&#96;&#96;&#96;
</div> 
<br>
```{r echo=FALSE, fig.align='right'}
plot(cars$speed, cars$dist, main="Travelling speed vs Breaking distance", xlab = "Travelling speed (mhp)", ylab="Stopping distance (ft)")
```

**Remeber** that you can you always execute code in the _console_ by pressing "green arrow" or using keyborad short cut `ctrl+enter`

We know now how to align figure to where we want, how about changing the size of it? We can do that with `fig.height` and `fig.width`, the units are inches. Let's make 4 X 4 inches figure e.g ```{r fig.height=4, fig.widht=4} ..``` and also align the figure to the center

<div class="basic_md">
&#96;&#96;&#96;{r echo=FALSE, fig.height=4, fig.width=4, fig.align='center'} <br>
 plot(cars&#36;speed, cars&#36;dist, main="Travelling speed vs Breaking distance", xlab = "Travelling speed (mhp)", ylab="Stopping distance (ft)") <br>
&#96;&#96;&#96;
</div> 
<br>
```{r echo=FALSE, fig.height=4, fig.width=4, fig.align='center'}
plot(cars$speed, cars$dist, main="Travelling speed vs Breaking distance", xlab = "Travelling speed (mhp)", ylab="Stopping distance (ft)")
```

One last thing I'd like to share with you is how to add a figure legend or a caption - with `fig.cap` of course e.g ``{r `fig.cap="This is my legend"} ..``` Go ahead and add a figure description.

<div class="basic_md">
&#96;&#96;&#96;{r, echo=FALSE, fig.cap="&#42;&#42;Figure: 1&#42;&#42; This figure illustrates breaking distance as a function of travelling speed"} <br>
 plot(cars&#36;speed, cars&#36;dist, main="Travelling speed vs Breaking distance", xlab = "Travelling speed (mhp)", ylab="Stopping distance (ft)") <br>
&#96;&#96;&#96;
</div> 
<br>
```{r, echo=FALSE, fig.cap="**Figure: 1** This figure illustrates breaking distance as a function of travelling speed"}
plot(cars$speed, cars$dist, main="Travelling speed vs Breaking distance", xlab = "Travelling speed (mhp)", ylab="Stopping distance (ft)")
```

**Note** that the figure legend follows the same alignment as the figure itself. 

I'm going to share with you four other options that I find rather useful before moving onto [YAML header](#yaml-header) and [R slides](#r-slides---ioslides) sections.

For this examplel I'm going to use simple `for` loop. We are going to use this variable `sentence <- c("Let", "the", "computer", "do", "the", "work")`

<pre class="basic_md">
&#96;&#96;&#96;{r}
 sentence <- c("Let", "the", "computer", "do", "the", "work")
 
 for(word in sentence){
   print(word)
 }
&#96;&#96;&#96;
</pre> 
<br>
```{r}
sentence <- c("Let", "the", "computer", "do", "the", "work")

for(word in sentence){
  print(word)
}
```

These two options are cosmetis:

  - `prompt=FALSE` is to turn prompt display on or off i.e trying to mimic _consosle_
  - `comment=` this is to change or remove double hash symbol comments to something else
  
Let's turn prompt on to see whats it looks like e.g ```{r prompt=TRUE} ..``` and change our comments symbol to double forward slash `//` 

<pre class="basic_md">
&#96;&#96;&#96;{r prompt=TRUE, comment="//"}
 sentence <- c("Let", "the", "computer", "do", "the", "work")
 
 for(word in sentence){
   print(word)
 }
&#96;&#96;&#96;
</pre> 
<br>
```{r prompt=TRUE, comment="//"}
sentence <- c("Let", "the", "computer", "do", "the", "work")

for(word in sentence){
  print(word)
}
```

The two other options I just would like to mention and will let you explore them at your own leisure.

  - `engine=` you can use to specify different language type. This is very cool. You can actually embed python, BASH JavaScript and nubmer of other languages. 
  - `child=` You use this options to "merge" several `.Rmd` into one. 

# YAML header

At the very top of your `.Rmd` file you can, optionaly, include YAML block. In this block you can fine turn your output document, add some metadata and change document's font and theme. You can also pass additional files such as stylesheet file `.css` and bibliography file `.bib` for text citation. I'm only going to show you a few possible options and will let you explore the rest on your own.

Navigate to the top of your `.Rmd` document and find YAML section there. Just like with the options we passed in to manipulate R code block, YAML block also has **key = value** pairs, but instead they are separated by colon ( `:` ). Now let's add table of content to our document, this will make it easier to navigate your page as well as give nice over view of the content our **key** is `toc` with value `true` or `yes` which one you prefer better. 

<pre class="basic_md">
 &#175;&#175;&#175;
 title: "Hello world"
 author: "Kirill"
 date: "13 July 2016"
 output:
   html_document:
     toc: true
 &#175;&#175;&#175; 
</pre>
 <br>
 
**Note** that you need to bring `html_document` onto new line and indent it with two spaces. `html_document` is a value of `output` key. `output` can have other values e.g `pdf_document`, `word_document`. However `html_document` also becomes a key for `toc` value and `toc` becames a key for its own value. 

Now that we have sort it initial YAML layout we can continue adding more options to style our HTML document. The other two useful options that I like to pass in are `toc_depth` and `number_sections`

<pre class="basic_md">
 &#175;&#175;&#175;
 title: "Hello world"
 author: "Kirill"
 date: "13 July 2016"
 output:
   html_document:
     toc: true
     toc_depth: 4
     number_sections: yes
 &#175;&#175;&#175; 
</pre>
 <br>

Most of those options are self explanatory. They best way to learn what each does, is to pass them in. Note that you can comment lines out inside YAML section with `#` symbol. 

The last two options that can change your document apperance are `theme` and `highlight`. There are nubmer of different themes and highlight options. I suggest you find the one you like in your own time.

# R slides - ioslides

As I mentioned in previous section, `output` has many options, one of which is `ioslides_presentation`. You can simple add 

<pre class="basic_md">
 &#175;&#175;&#175;
 output: ioslides_presentation
 &#175;&#175;&#175; 
</pre>

at the top of your document and your `.Rmd` files will be complied to slide presentation instead.

Another options is select **presentation** options when you were opening R markdown file. Either way you'll notice YAML header reflects your selected output type. 
Let's open new R markdown document and let's select presentation instead and let's select HTML (ioslides) option there. You can still save your files as `.Rmd`, and then press the\ the `Knit HTML` button.

The syntax for the document is more or less the same, expcept `##` is now used to mark new slide. 
